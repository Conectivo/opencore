<html metal:use-macro="here/@@standard_macros/master">
  <head>
    <title metal:fill-slot="title"
           tal:content="string:Subprojects - ${view/portal_title}" />
  </head>
  <body>
    <tal:opencore.content metal:fill-slot="content">              
      <div class="oc-headingBlock">
        <h1><span tal:replace="context/Title" /> related projects</h1>
      </div>

        <div class="oc-column-group">
        <div class="oc-widget oc-widget-feed oc-column-left">
          <h2>All subprojects</h2>
          <ul class="oc-feed-list">
            <li class="oc-feed-item oc-clearAfter" tal:repeat="project view/all_subprojects">
              <div class="oc-project-logo">
                <tal:setvar define="proj_url python:view.project_url(project);
                                    logo view.logo_for_proj_brain(project);
                                    thumb_url python:logo and ('%s/logo_thumb' % proj_url) or view.defaultProjLogoURL">
                  <tal:if condition="logo">
                    <a tal:attributes="href proj_url">
                      <img class="oc-project-logo" tal:attributes="src thumb_url; alt project/Title; title project/Title" />
                    </a>
                  </tal:if>
                </tal:setvar>
              </div>

              <h3 class="oc-feed-item-title">
                <a href="" tal:attributes="href python:view.project_url(project)" tal:content="project/Title">Project Title</a>
              </h3>
              <p class="oc-feed-item-data oc-discreetText" tal:define="nmembers python:view.n_project_members(project)">
                <span tal:replace="nmembers">YY</span> member<span tal:condition="python: nmembers != 1" tal:replace="string:s" />, active since <span tal:replace="python: view.pretty_date(project.CreationDate)">Jan 1937</span>
              </p>
              <p class="oc-feed-item-description" tal:define="desc project/Description">
                <span tal:condition="desc" tal:replace="desc" />
              </p>
            </li>
          </ul>
        </div>
        <!-- list of recently updated projects. XXX maybe create a macro out of this? Generic for recent content? -->
        <div class="oc-widget oc-widget-feed oc-column-right">
          <h2>Recently updated</h2>
          <ul class="oc-feed-list">
            <li class="oc-feed-item oc-clearAfter" tal:repeat="project view/recently_updated_projects">
              <div class="oc-project-logo">
                <tal:setvar define="proj_url python:view:project_url(project);
                                    logo view.logo_for_proj_brain(project);
                                    thumb_url python:logo and ('%s/logo_thumb' % proj_url) or view.defaultProjLogoURL">
                  <tal:if condition="logo">
                    <a tal:attributes="href proj_url">
                      <img class="oc-project-logo" tal:attributes="src thumb_url; alt project/Title; title project/Title" />
                    </a>
                  </tal:if>
                </tal:setvar>
              </div>
              <h3 class="oc-feed-item-title">
                <a href="" tal:attributes="href python:view.project_url(project)" tal:content="project/Title">Project Title</a>
              </h3>
              <p class="oc-feed-item-data oc-discreetText" tal:define="nmembers python:view.n_project_members(project)">
                <span tal:replace="nmembers">YY</span> member<span tal:condition="python: nmembers != 1" tal:replace="string:s" />, active since <span tal:replace="python: view.pretty_date(project.CreationDate)">Jan 1937</span>
              </p>
              <p class="oc-feed-item-description" tal:define="desc project/Description">
                <span tal:condition="desc" tal:replace="desc" />
              </p>
            </li>
          </ul>
        </div>

        </div>

    </tal:opencore.content>     
      
    <!-- XXX we need to think about how we are going to implement this with dynamic data
         wiki page snippet pulled from a particular location? -->
    <!-- content-sidebar -->
    <tal:opencore.sidebar metal:fill-slot="sidebar">
      <div class="oc-getstarted oc-boxy">
      	<h2>Start a project</h2>
      	<p class="oc-boxy-content">Can&rsquo;t find a project you are interested in? See a need that is not being met? Why not <a href="">start a new project</a>?
      </div>
      <div class="oc-boxy">
	<a href="/featured-projects#oc-wiki-content" rel="include">Featured Projects</a>
      </div>
    </tal:opencore.sidebar>
    
    
  </body>
</html>
