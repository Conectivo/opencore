<html i18n:domain="opencore" metal:use-macro="here/@@standard_macros/master">
  <head>
    <title metal:fill-slot="title"
           tal:content="string:Projects - ${view/portal_title}" />
  </head>
  <body>
    <div metal:fill-slot="content">              
      <div class="oc-headingBlock">
        <h1 tal:content="string:Projects on ${view/portal_title}" />
        <p i18n:translate="projects_currently_serving" class="oc-headingContext">Currently serving <span i18n:name="num_projects" tal:replace="view/projects_served_count"/> projects</p>
      </div>
      <div id="oc-content-main">
        
        <tal:set_var define="current_search_page string:projects;
           form_action_url string:${context/absolute_url}/searchresults">
          <div metal:use-macro="here/main_macros/search_widget" />
        </tal:set_var>

        <!-- list of recently updated projects. XXX maybe create a macro out of this? Generic for recent content? -->
        <div class="oc-widget oc-widget-feed">
          <h2 class="oc-feed-title">Recently updated projects</h2>
          <ul class="oc-feed-list oc-clearAfter">
            <li class="oc-feed-item oc-clearAfter" tal:repeat="project view/recently_updated_projects">
              <a tal:attributes="href python:view.project_url(project)">
                <img class="oc-project-logo" src="++resource++img/default-projlogo-thumb.gif" tal:attributes="alt project/Title; title project/Title" />
              </a>
              <div class="oc-feed-item-content">
                <h3 class="oc-feed-item-title">
                  <a tal:attributes="href python:view.project_url(project)" tal:content="project/Title">Project Title</a>
                </h3>
                <p class="oc-feed-item-data oc-discreetText" tal:define="nmembers python:view.n_project_members(project)">
                  <span tal:replace="nmembers">YY</span>
                  member<span tal:condition="python: nmembers != 1" tal:replace="string:s" />,
                  last updated <span tal:replace="python: view.pretty_date(project.ModificationDate)" />
                </p>
                <p class="oc-feed-item-description" tal:define="desc project/Description">
                  <span tal:condition="desc" tal:replace="desc" />
                </p>
              </div>
            </li>
          </ul>
        </div>
        
      </div><!-- content-main -->
      
      
      <!-- XXX we need to think about how we are going to implement this with dynamic data
           wiki page snippet pulled from a particular location? -->
      <!-- content-sidebar -->
      <div id="oc-content-sidebar">
        <div class="oc-getstarted" tal:condition="view/loggedin">
          <h2 i18n:translate="projects_get_started_heading">Get started&hellip;</h2>
          <p i18n:translate="projects_get_started">Can&rsquo;t find a project you are interested in? See a need that is not being met?
          </p>
           <a i18n:translate="projects_start_project_button" tal:attributes="href string:${view/siteURL}/projects/create" class="oc-banana">Start a new project</a>
        </div>
      </div>
    </div><!-- content-fill-slot -->
    
  </body>
</html>
