<html metal:use-macro="here/@@standard_macros/master">
  <head>
    <link metal:fill-slot="link" />
    <script metal:fill-slot="script" />
  </head>
  <body>
    <div metal:fill-slot="content">              
      <div class="oc-headingBlock">
         <h1>Welcome to OpenPlans!</h1>
      </div>
      
      <div id="oc-content-main">
  <div id="oc-content-sidebar" tal:replace="structure python: view.render_static('main_home_intro.txt')" />
        
        <div class="oc-column-group">
            <div class="oc-widget oc-widget-feed oc-column-left">
              <h2>Newest projects</h2>
              <ul class="oc-feed-list">
            <li class="oc-feed-item oc-clearAfter" tal:repeat="project view/recently_created_projects">
              <img class="oc-avatar" src="" tal:attributes="src project/image_src | nothing" />
              <h3 class="oc-feed-item-title">
                    <a href="" tal:attributes="href project/absolute_url" tal:content="nocall: project/title">Project title</a>
              </h3>
              <p class="oc-feed-item-description" tal:content="project/mission | string: project mission statement goes here">
                This is the descriptive text for a project. Apparently it doesn't quite work right yet. Is there even a field for users to fill out or entry to call from a database?
              </p>
            </li>
              </ul>
            </div>
            
            <div class="oc-widget oc-widget-feed oc-column-right">
              <h2>Updated projects</h2>
              <ul class="oc-feed-list">
            <li class="oc-feed-item oc-clearAfter" tal:repeat="project view/recently_updated_projects">
              <img class="oc-avatar" src="" tal:attributes="src project/image_src | nothing" />
              <h3 class="oc-feed-item-title">
                    <a href="" tal:attributes="href project/absolute_url" tal:content="nocall: project/title">Project title</a>
              </h3>
                  <p class="oc-feed-item-data oc-discreetText" tal:define="nmembers python: len(project.projectMemberIds())">
                    <span tal:replace="nmembers">YY</span> member<span tal:condition="python: nmembers > 1" tal:replace="string:s" />
                  </p>
                  <p class="oc-feed-item-data oc-discreetText">
                    last updated <span tal:replace="python: view.pretty_date(project.ModificationDate())">Jan 1937</span>
                  </p>
            </li>
              </ul>
            </div>
        </div>

      </div><!-- content-main -->
      
      <div id="oc-content-sidebar">
        <form name="search_form" class="oc-widget oc-widget-search oc-boxy" action="." tal:attributes="action string:${context/portal_url}/sitesearch">
          <input type="text" name="search_string" value='' />
          <input type="submit" name="search_action" value="Search" />
        </form>
        <form name="do_something_form" class="oc-getstarted oc-boxy" action="." tal:attributes="action string:${context/portal_url}/@@index.html">
          <select name="go_here">
              <option value="">Get started!</option>
            <optgroup label="">
              <option tal:attributes="value string:${context/portal_url}/projects/@@index.html">Discover projects</option>
              <option tal:attributes="value string:${context/portal_url}/people/@@index.html">Find people</option>
              <option tal:condition="view/loggedin" tal:attributes="value string:${context/portal_url}/@@createProject">Start a project</option> 
            </optgroup>
            <optgroup label="">
              <option tal:condition="not: view/loggedin" tal:attributes="value string:${context/portal_url}/login">Become a member</option> 
              <option tal:condition="view/loggedin" tal:attributes="value string:${context/portal_url}/@@edit_profile">Edit your profile</option> 
            </optgroup>
          </select>
          <input type="submit" name="do_something" value="Go" />
        </form>
        <div class="oc-widget oc-widget-feed">
          <h2>OpenPlans News</h2>
          <ul class="oc-feed-list">
            <li tal:repeat="item view/news" class="oc-feed-item oc-clearAfter">
              <h3 class="oc-feed-item-title">
                <a tal:content="item/Title" 
                tal:attributes="href string:${context/portal_url}/news/${item/getId}">News item</a>
              </h3>
              <p class="oc-feed-item-data oc-discreetText">
                by 
                <a tal:define="userid item/Creator" tal:attributes="href string:${context/portal_url}/people/${userid}" tal:content="userid" />,
                <span tal:content="python: view.pretty_date(item.CreationDate)">Jan 1937</span>
              </p>
            </li>
          </ul>
          <a class="oc-paginator" tal:attributes="href string:${context/portal_url}/news">more news&hellip;</a>
        </div><!-- OpenPlans News -->
        <div class="oc-clearAfter">
          <h2>About us</h2>
          <div condition="not: view/loggedin" tal:replace="structure python: view.render_static('main_home_aboutus.txt')" /> 
        </div>      
      </div><!-- content-sidebar -->
    </div><!-- content-fill-slot -->
  </body>
</html>
