<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/@@standard_macros/master"
      i18n:domain="plone">

<body>
<div metal:fill-slot="content"
     tal:define="portal view/portal">

<h1 i18n:translate="heading_contact_information">Contact Site Administrators</h1>
<!-- feedback form -->        

<p class="documentDescription"
   i18n:translate="description_contact_info_feedback">
  If you want to contact the site administration, fill in the form
  below.
</p>

<form name="feedback_form"
      action=""
      method="post"
      tal:define="errors view/errors"
      tal:attributes="action string:${context/absolute_url}/${view/name}">

  <fieldset>
    <legend i18n:translate="legend_feedback_for_contact_info">Feedback details</legend>

    <tal:feedbackForm condition="not: view/loggedin">
      <div class="field"
           tal:define="error errors/sender_fullname|nothing"
           tal:attributes="class python:error and 'oc-fieldBlock-error' or 'oc-fieldBlock'">
        <label for="sender_fullname" i18n:translate="label_sender_fullname">
          Name
        </label>

        <div class="formHelp" i18n:translate="help_sender_fullname">
          Please enter your full name
        </div>

        <div tal:content="error">Validation error output</div>            

        <input type="text" 
               id="sender_fullname" 
               name="sender_fullname" 
               size="40" 
               value="" 
               tabindex="" 
               tal:attributes="value request/sender_fullname|nothing"
               />
      </div>
      <div class="field"
           tal:define="error errors/sender_from_address|nothing"
           tal:attributes="class python:error and 'oc-fieldBlock-error' or 'oc-fieldBlock'">
        <label for="sender_from_address" i18n:translate="label_sender_from_address">
          E-Mail
        </label>
        <span class="fieldRequired" title="Required"
              i18n:attributes="title title_required;"
              i18n:translate="label_required">(Required)</span>

        <div class="formHelp" i18n:translate="help_sender_from_address">
          Please enter your e-mail address
        </div>
        
        <div tal:content="error">Validation error output</div>            

        <input type="text" 
               id="sender_from_address" 
               name="sender_from_address" 
               size="40" 
               value="" 
               tabindex="" 
               tal:attributes="value request/sender_from_address|nothing"
               />
      </div>
    </tal:feedbackForm>
    <tal:feedbackForm condition="view/loggedin">
      <tal:feedbackDefines define="member_info view/member_info;
                                   fullname python:request.get('fullname', member_info.get('fullname', ''));
                                   email python:request.get('email', member_info.get('email',''));">
        <input type="hidden" name="sender_fullname" value="fullname" tal:attributes="value fullname" />
        <input type="hidden" name="sender_from_address" value="email" tal:attributes="value email" />
      </tal:feedbackDefines>
    </tal:feedbackForm>
    <div class="field"
         tal:define="error errors/subject|nothing"
         tal:attributes="class python:error and 'oc-fieldBlock-error' or 'oc-fieldBlock'">
      <label for="subject" i18n:translate="label_subject">
        Subject
      </label>
      <span class="fieldRequired" title="Required"
            i18n:attributes="title title_required;"
            i18n:translate="label_required">(Required)</span>

      <div class="formHelp" i18n:translate="help_subject">
        Please enter the subject of the message you want to send.
      </div>
      
      <div tal:content="error">Validation error output</div>            

      <input type="text" 
             id="subject" 
             name="subject" 
             size="25" 
             value="" 
             tabindex="" 
             tal:attributes="value request/subject|nothing"
             />
    </div>
    <div class="field"
         tal:define="error errors/message|nothing"
         tal:attributes="class python:error and 'oc-fieldBlock-error' or 'oc-fieldBlock'">
      <label for="message" i18n:translate="label_message">
        Message
      </label>
      <span class="fieldRequired" title="Required"
            i18n:attributes="title title_required;"
            i18n:translate="label_required">(Required)</span>

      <div class="formHelp" i18n:translate="help_message">
        Please enter the message you want to send.
      </div>
      
      <div tal:content="error">Validation error output</div>            
      
      <textarea name="message"
                id="message"
                rows="5"
                cols="25"
                tabindex=""
                tal:content="request/message|nothing"
                > </textarea>
    </div>
    
    <div class="formControls">

      <input class="context"
             tabindex=""
             type="submit"
             name="task|send"
             value="Send"
             i18n:attributes="value label_send;"/>

    </div>

  </fieldset>

  <input type="hidden" name="form.submitted" value="1" />

</form>

</div>

</body>
</html>
