<tal:vars define="proj view/project">
  <html metal:use-macro="here/@@standard_macros/master">
    <head>
      <link metal:fill-slot="link" />
      <script metal:fill-slot="script" />
    </head>
    <body>
      <div metal:fill-slot="content">
        <div class="oc-headingBlock">
          <h1>Project preferences</h1>
          <!-- <p class="oc-headingContext">Modify the general preferences for your project</p> -->
        </div>
        <div id="oc-content-main">
          <form>
            <fieldset>
              <div class="oc-headingBlock">
                <h2>Name and Mission Statement</h2>
              </div>
              <table class="oc-form">
                <tbody>
                  <tr class="oc-form-row">
                    <th class="oc-form-label" scope="row">
                      <label for="fullname">Name</label>
                    </th>
                    <td class="oc-form-value">
                      <input type="text" id="fullname" name="fullname" tal:attributes="value proj/fullname"/>
                    </td>
                    <td class="oc-form-help">
                      <span class="oc-form-context"></span>
                      <span id="oc-username-validator" class="oc-form-validator"></span>
                    </td>
                  </tr>
                  <tr class="oc-form-row">
                    <th class="oc-form-label" scope="row">
                      <label>URL</label>
                    </th>
                    <td class="oc-form-value">
                      <span tal:content="proj/url"/>
                    </td>
                    <td class="oc-form-help">
                      <span class="oc-form-context"></span>
                      <span id="oc-username-validator" class="oc-form-validator"></span>
                    </td>
                  </tr>
                  <tr class="oc-form-row">
                    <th class="oc-form-label" scope="row">
                      <label for="mission">Mission Statement</label>
                    </th>
                    <td class="oc-form-value">
                      <textarea name="mission" id="mission" tal:content="proj/mission" rows="3" cols="40" />
                    </td>
                    <td class="oc-form-help">
                      <span class="oc-form-context"></span>
                      <span id="oc-username-validator" class="oc-form-validator"></span>
                    </td>
                  </tr>
                </tbody>
              </table>
            </fieldset>

            <fieldset>
              <legend><h2>Security settings</h2></legend>
              <p><strong>Non-members of the project can:</strong></p>
              <ul class="oc-form-radiolist" tal:define="seclevel proj/security">
                <li>
                  <input type="radio" class="oc-input-typeRadio" id="securitylevel-3" name="securitylevel"
                    tal:attributes="checked python: seclevel==3 and 'checked' or ''" />
                  <label for="securitylevel-3">view and edit content</label>
                </li>
                <li>
                  <input type="radio" class="oc-input-typeRadio" id="securitylevel-2" name="securitylevel" 
                    tal:attributes="checked python: seclevel==2 and 'checked' or ''" />
                  <label for="securitylevel-2">only view content</label>
                </li>
                <li>
                  <input type="radio" class="oc-input-typeRadio" id="securitylevel-1" name="securitylevel"
                    tal:attributes="checked python: seclevel < 2 and 'checked' or ''" />
                  <label for="securitylevel-1">not even view content</label>
                  <ul class="oc-discreetText">
                    <li class="oc-smallText">
                      <!-- TODO only enable this checkbox if security level is 3 -->
                      <input type="checkbox" class="oc-input-typeCheck" id="searchable" name="searchable"
                        tal:attributes="checked python: seclevel==0 and 'checked' or ''" />
                      <label for="searchable">do not show project in search results</label>
                    </li>
                  </ul>
                </li>
              </ul>
            </fieldset>

            <fieldset>
              <legend><h2>Additional tools</h2></legend>
              <ul class="oc-form-radiolist" tal:define="featurelets python:[f['name'] for f in proj['featurelets']]">
                <li>
                  <input type="checkbox" class="oc-input-typeCheck" id="tasktracker" name="tasktracker" 
                    tal:attributes="checked python: 'tasktracker' in featurelets and 'checked' or ''" />
                  <label for="tasktracker">Task Tracker</label>
                  <!-- <p class="oc-form-context">An extensive to-do list manager that makes it easy to share tasks and get things done.</p> -->
                </li>
                <li>
                  <input type="checkbox" class="oc-input-typeCheck" id="listen" name="listen"
                    tal:attributes="checked python: 'listen' in featurelets and 'checked' or ''" />
                  <label for="listen">Mailing lists</label>
                  <!-- <p class="oc-form-context">Email and forum-based discussion spaces.</p> -->
                </li>
              </ul>
            </fieldset>
            <button type="submit" class="oc-input-typeButton">update</button>
          </form>
        </div><!-- end .oc-content-main -->
      </div><!-- end content-fill-slot -->
    </body>
  </html>
</tal:vars>
