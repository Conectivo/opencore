<tal:macro metal:define-macro="image">
  <tal:setvar define="
  image_uri python:'%s/%s' % (image.aq_inner.aq_parent.absolute_url(), image.id);
  thumb_uri string: ${image_uri}/thumb;
  image_desc python: '%s - %s' % (image.title, view.prettySize(image.size));
  image_path string:${image/aq_parent/id}/${image/id}">



    <div class="thumb_holder" tal:attributes="id string: holder_${image_path}">
      <a href="#" class="thumb" style="cursor: pointer;" tal:attributes="title image_desc; onclick string:selectImage('/${image_path}', '${image/title}', ${image/width}, ${image/height});; return false;;">
        <img tal:attributes="src thumb_uri; alt image_desc" />
      </a>
      <div class="edit">
        <a tal:attributes="href string:backend-upload?task|${image/aq_parent/id}|delete-image=del&amp;att=${image/id}" title="Trash" onclick="return confirmDeleteFile('');"><img src="++resource++img/edit_trash.gif" alt="Trash" height="15" width="15" /></a>

        <span tal:replace="image/width"/>x<span tal:replace="image/height"/>
      </div>
    </div>
  </tal:setvar>
</tal:macro>
