<tal:vars define="usr view/viewedmember;
                  memberdata view/viewed_member_info">

<html i18n:domain="opencore" metal:use-macro="here/@@standard_macros/master">
  <head>
    <title metal:fill-slot="title" tal:content="string:${view/area/Title} on ${view/portal_title}" />
    <script metal:fill-slot="script"
            tal:condition="view/has_geocoder"
	    tal:attributes="src view/geo_info/maps_script_url"
	    type="text/javascript"></script>
  </head>
  <body>
    <div metal:fill-slot="content">
     <form name="profile_form" id="profile_form" method="post" class="oc-member-edit" action="profile-edit" enctype="multipart/form-data">

      <div id="oc-content-main">
        <tal:first-login condition="request/first_login | nothing">
          <div class="oc-getstarted oc-js-closeable">
            <h1 tal:content="string:Welcome to ${view/portal_title}!" />
            <p tal:condition="view/has_invitations" i18n:translate="profile-edit_fill_in_invite" class="oc-bigText">
              Please take a moment to fill out your profile, then proceed to your <a href="account">account</a> page
              to join the project that invited you.
            </p>
            <p tal:condition="not:view/has_invitations" i18n:translate="profile-edit_fill_in" class="oc-bigText">
              Please take a moment to fill out your profile, then proceed to your <a href="account">account</a> page.
            </p>
          </div>
        </tal:first-login>
          <div id="oc-member-badge" class="oc-boxy oc-clearAfter">
            <div class="oc-member-editimage">
              <div metal:use-macro="view/portrait_snippet/macros/portrait" />
            </div>
            <fieldset>
              <metal:login-info use-macro="view/member_macros/macros/login-info" />
              <ul class="oc-plainList">
                <li>
                  <label i18n:translate="profile-edit_name_label" for="fullname">Name</label><br />
                  <input type="text" id="fullname" name="fullname"
                    class="oc-autoFocus"
                    tal:attributes="value request/fullname | memberdata/fullname;
                                    class python: request.form.get('field') == 'fullname' and default or nothing" />
                </li>
                <li>
                  <label i18n:translate="profile-edit_location_label" for="location">Location</label> (example: "New York, NY" or "cloud nine") <br />
                  <input type="text" id="location" name="location"
                    class="oc-autoFocus"
                    tal:attributes="value request/location | memberdata/location;
                                    class python:request.form.get('field') == 'location' and default or nothing" />
                </li>

                <li>
                  <label i18n:translate="profile-edit_website_label" for="website">Website</label><br />
                  <input type="text" id="website" name="website"
                    class="oc-autoFocus"
                    tal:attributes="value request/website | memberdata/website;
                                    class python: request.form.get('field') == 'website' and default or nothing" />
                </li>
              </ul>
            </fieldset>
          </div>
          <fieldset>

            <label i18n:translate="profile-edit_about_label" for="statement">About</label>
            <textarea rows="3" cols="80" name="statement" id="statement"
              class="oc-autoFocus"
              tal:attributes="class python: request.form.get('field') == 'statement' and default or nothing"
              tal:content="request/statement | memberdata/statement"></textarea>

            <label i18n:translate="profile-edit_interests_label" for="skills">Interests</label>
            <textarea rows="1" cols="80" name="skills" id="skills"
              class="oc-autoFocus"
              tal:attributes="class python: request.form.get('field') == 'skills' and default or nothing"
              tal:content="request/skills | memberdata/skills"></textarea>

            <tal:comment replace="nothing">
              <label for="background">Background</label>
              <textarea rows="1" cols="80" name="background" id="background"
                class="oc-autoFocus"
                tal:condition="python: request.form.get('field') == 'background'"
                tal:content="request/background | memberdata/background"></textarea>
              <textarea rows="1" cols="80" name="background" id="background"
                tal:condition="python: request.form.get('field') != 'background'"
                tal:content="request/background | memberdata/background"></textarea>
  
              <label for="affiliations">Affiliations</label>
              <textarea rows="1" cols="80" name="affiliations" id="affiliations"
                class="oc-autoFocus"
                tal:condition="python: request.form.get('field') == 'affiliations'"
                tal:content="request/affiliations | memberdata/affiliations"></textarea>
              <textarea rows="1" cols="80" name="affiliations" id="affiliations"
                tal:condition="python: request.form.get('field') != 'affiliations'"
                tal:content="request/affiliations | memberdata/affiliations"></textarea>
  
              <label for="favorites">Favorites</label>
              <textarea rows="1" cols="80" name="favorites" id="favorites"
                class="oc-autoFocus"
                tal:condition="python: request.form.get('field') == 'favorites'"
                tal:content="request/favorites | memberdata/favorites"></textarea>
              <textarea rows="1" cols="80" name="favorites" id="favorites"
                tal:condition="python: request.form.get('field') != 'favorites'"
                tal:content="request/favorites | memberdata/favorites"></textarea>
            </tal:comment>

          </fieldset>

          <ul class="oc-actions oc-wiki-actions">
            <li>
              <input type="submit" 
                     name="task|update"
                     value="Update"
                     class="oc-button oc-chooseThis" />
              or <a i18n:translate="profile-edit_cancel" href="profile">Cancel</a>
            </li>
          </ul> 
      </div><!-- end #oc-content-main -->

      <div id="oc-content-sidebar">
           <div class="oc-boxy">
	   <label for="position-text">Find Address on Map:</label><br />
           (example: "349 w 12th st, ny, ny")
           <noscript>
            <input type="text" id="position-text-noscript" name="position-text"
               tal:attributes="value view/geo_info/position-text | nothing" />

             <div class="oc-sidebar-map" tal:condition="view/geo_info/static_img_url | nothing">
              <img tal:attributes="src view/geo_info/static_img_url" />
             </div>
           </noscript>

           <input type="hidden" id="position-latitude" name="position-latitude"
               tal:attributes="value view/geo_info/position-latitude" />
           <input type="hidden" id="position-longitude" name="position-longitude"
               tal:attributes="value view/geo_info/position-longitude | nothing" />

	   <span class="oc-js-unhide">
              <input type="text" id="position-text" name="position-text"
                 tal:attributes="value view/geo_info/position-text | nothing" />
              <div id="position" class="oc-js-gmap oc-sidebar-map"></div>
	   </span>

      </div><!-- end .oc-content-sidebar -->
    </form>

    </div><!-- content-fill-slot -->
  </body>
</html>
</tal:vars>
