<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head profile="http://gmpg.org/xfn/11">
    <link rel="stylesheet" href="/++resource++css/themes/openplans.css" type="text/css" media="all" />
    <link rel="stylesheet" href="/++resource++css/opencore.css" type="text/css" media="all" />
    <title>Portal Stats</title>
  </head>  
  <body>
    <h1>Portal Stats</h1>
    <h2>members</h2>
    <table>
    <tr><td><span tal:replace="python: len(view.get_active_members())"/> logged in in last <span tal:replace="view/expiry_days"/> days</td></tr>
    <tr><td><span tal:replace="python: '%d dormant after an average of %.1f days' % view.get_member_stickiness()"/></td></tr>
    <tr><td><span tal:replace="python: len(view.get_unused_members())"/> unused after first 24 hours</td></tr>
    <tr><td><span tal:replace="python: len(view.get_members())"/> total</td></tr>
    </table>
    <table border="1" cellspacing="0">
      <tr>
        <td>total</td>
	<td>active (login in last <span tal:replace="view/expiry_days"/> days)</td>
	<td>average lifespan</td>
	<td>never used beyond first 24 hours</td>
      </tr>
      <tr>
	<td tal:content="python: len(view.get_members())" />
	<td tal:content="python: len(view.get_active_members())" />
        <td tal:content="python: '%.1f days from %d members' % view.get_member_stickiness()" />
	<td tal:content="python: len(view.get_unused_members())" />
      </tr>
    </table>
    <h2>projects</h2>
    <table>
    <tr><td><span tal:replace="python: len(view.get_active_projects())"/> edited in last <span tal:replace="view/expiry_days"/> days</td></tr>
    <tr><td><span tal:replace="python: '%d dormant after an average of %.1f days' % view.get_project_stickiness()"/></td></tr>
    <tr><td><span tal:replace="python: len(view.get_unused_projects())"/> unused after first 24 hours</td></tr>
    <tr><td><span tal:replace="python: len(view.get_projects())"/> total</td></tr>
    </table>
    <table border="1" cellspacing="0">
      <tr>
        <td>total</td>
	<td>active (edited in last <span tal:replace="view/expiry_days"/> days)</td>
	<td>average lifespan</td>
	<td>never used beyond first 24 hours</td>
      </tr>
      <tr>
	<td tal:content="python: len(view.get_projects())" />
	<td tal:content="python: len(view.get_active_projects())" />
        <td tal:content="python: '%.1f days from %d projects' % view.get_project_stickiness()" />
	<td tal:content="python: len(view.get_unused_projects())" />
      </tr>
    </table>
    <h2>mailing lists</h2>
    <table>
    <tr><td><span tal:replace="python: len(view.get_active_mailing_lists())"/> active in last <span tal:replace="view/expiry_days"/> days</td></tr>
    <tr><td><span tal:replace="python: '%d dormant after an average of %.1f days' % view.get_mailing_list_stickiness()"/></td></tr>
    <tr><td><span tal:replace="python: len(view.get_unused_mailing_lists())"/> unused after first 24 hours</td></tr>
    <tr><td><span tal:replace="python: len(view.get_mailing_lists())"/> total</td></tr>
    </table>

    <table border="1" cellspacing="0">
      <tr>
        <td>total</td>
	<td>active (in last <span tal:replace="view/expiry_days"/> days)</td>
	<td>average lifespan</td>
	<td>never used beyond first 24 hours</td>
      </tr>
      <tr>
	<td tal:content="python: len(view.get_mailing_lists())" />
	<td tal:content="python: len(view.get_active_mailing_lists())" />
        <td tal:content="python: '%.1f days from %d lists' % view.get_mailing_list_stickiness()" />
	<td tal:content="python: len(view.get_unused_mailing_lists())" />
      </tr>
    </table>
    <table tal:replace="nothing" border="1" cellspacing="0">
      <tr><td>member</td>
        <td>modified</td>
        <td>created</td></tr>
      <tr tal:repeat="mem view/get_members">
        <td tal:content="mem/Title"/>
        <td tal:content="mem/modified" />
        <td tal:content="mem/created"/></tr>
    </table>

    <table tal:replace="nothing" border="1" cellspacing="0">
      <tr><td>project</td>
        <td>modified</td>
        <td>created</td></tr>
      <tr tal:repeat="proj view/get_projects">
        <td tal:content="proj/Title"/>
        <td tal:content="proj/modified" />
        <td tal:content="proj/created"/></tr>
    </table>

    <table tal:replace="nothing" border="1" cellspacing="0">
      <tr><td>mailing list</td>
        <td>latest_date</td>
        <td>created</td></tr>
      <tr tal:repeat="ml view/get_mailing_lists">
        <td tal:content="ml/Title"/>
        <td tal:content="ml/latest_date" />
        <td tal:content="ml/created"/></tr>
    </table>
  </body>
</html>