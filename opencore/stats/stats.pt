<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head profile="http://gmpg.org/xfn/11">
    <link rel="stylesheet" href="/++resource++css/themes/openplans.css" type="text/css" media="all" />
    <link rel="stylesheet" href="/++resource++css/opencore.css" type="text/css" media="all" />
    <title>Portal Stats</title>
  </head>  
  <body>
    <h1>Portal Stats</h1>
    <h2>members</h2>
    <table border="1" cellspacing="0">
      <tr>
        <td>total</td>
	<td>active (in last <span tal:replace="view/expiry_days"/> days)</td>
	<td>never used</td>
	<td>avg time before expiry of used members</td>
      </tr>
      <tr>
	<td tal:content="python: len(view.get_members())" />
	<td tal:content="python: len(view.get_active_members())" />
	<td tal:content="python: len(view.get_unused_members())" />
        <td tal:content="python: '%.1f days from %d members' % view.get_member_stickiness()" />
      </tr>
    </table>
    <h2>projects</h2>
    <table border="1" cellspacing="0">
      <tr>
        <td>total</td>
	<td>active (used in last <span tal:replace="view/expiry_days"/> days)</td>
	<td>never used</td>
	<td>avg time before expiry of used projects</td>
      </tr>
      <tr>
	<td tal:content="python: len(view.get_projects())" />
	<td tal:content="python: len(view.get_active_projects())" />
	<td tal:content="python: len(view.get_unused_projects())" />
        <td tal:content="python: '%.1f days from %d projects' % view.get_project_stickiness()" />
      </tr>
    </table>

    <table tal:replace="nothing" border="1" cellspacing="0">
      <tr><td>member</td>
        <td>getLast_login_time</td>
        <td>modified</td>
        <td>created</td></tr>
      <tr tal:repeat="mem view/get_members">
        <td tal:content="mem/Title"/>
        <td tal:content="mem/getLast_login_time" />
        <td tal:content="mem/modified" />
        <td tal:content="mem/created"/></tr>
    </table>

    <table border="1" cellspacing="0">
      <tr><td>project</td>
        <td>modified</td>
        <td>created</td></tr>
      <tr tal:repeat="proj view/get_projects">
        <td tal:content="proj/Title"/>
        <td tal:content="proj/modified" />
        <td tal:content="proj/created"/></tr>
    </table>

  </body>
</html>