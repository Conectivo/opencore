<div class="oc-widget oc-widget-feed oc-column">
  <h2 class="oc-feed-title">
    <a tal:attributes="href view/link" tal:content="view/feedtitle">Feed Title</a>     
  </h2>
  <div tal:condition="not: view/items">
    <p>
       There are currently no 
       <span tal:replace="python:view.feedtitle.lower()">items</span>
    </p>

  </div>

  <ul class="oc-feed-list" tal:condition="view/items">
    <li class="oc-feed-item oc-clearAfter" 
        tal:repeat="feeditem
        view/items">

        <h3 class="oc-feed-item-title">
          <a tal:attributes="href feeditem/url"
             tal:content="feeditem/title" />    
        </h3>
	<span tal:condition="feeditem/responses/number | nothing"
	      tal:define="number feeditem/responses/number | nothing">
	<a tal:omit-tag="not:feeditem/responses/url"
	   tal:attributes="href feeditem/responses/url"
	   tal:define="replies python: number == 1 and 'reply' or 'replies'"
>
	   <span tal:replace="string: ${number} ${replies}" />
	</a>	   
	</span>

        <div class="oc-feed-item-data oc-discreetText">
          <span tal:replace="feeditem/byline | default">
          by
          </span>
          <a tal:omit-tag="not:feeditem/author/home"
	     tal:attributes="href feeditem/author/home"
             tal:content="feeditem/author/userid" />,
             <span tal:define="date feeditem/date"
                     tal:replace="python:view.pretty_date(date)"/>

	  <div tal:condition="feeditem/context | nothing">
	     from
	     <a tal:omit-tag="not:feeditem/context/url"
		tal:attributes="href feeditem/context/url"
	        tal:content="feeditem/context/title">
		This Context
	     </a>
          </div>

        </div>
    </li>
  </ul>
</div>
