<html i18n:domain="opencore" metal:use-macro="here/@@standard_macros/master">

  <head>
    <title metal:fill-slot="title" tal:content="string:Team - ${view/area/Title}" />
  </head>

  <body>

    <div metal:fill-slot="content">

      <div id="oc-content-main"
	   tal:define="batch view/batched_results">
	
	<tal:got_results condition="batch">
	  
          <div class="oc-headingBlock"
	       tal:define="many python: batch.start != batch.end">
            <h1>Team members</h1>
            <p class="oc-headingContext">
	      <span tal:replace="batch/sequence_length"/>
	      member<tal:plural condition="many">s</tal:plural>.
	      <span tal:condition="python: view.membertool.checkPermission('TeamSpace: Manage team memberships', context)">
		<a href="manage-team">
		  Add or remove members.
		</a>
	      </span>
	    </p>
          </div>
	  
          <!-- display the number of results that came back -->
          <div class="oc-directory-sorter">              
	    <!-- XXX TODO: the CSS is very brittle here
		 div.oc-directory-sorter, but no .oc-directory
		 and what is oc-roster? oc-boxy? oc-avatar?
	      -->
            <metal:macro use-macro="context/@@nui_batch_macros/pagination" />
            <metal:macro use-macro="context/@@nui_batch_macros/sort_string"/>	      
	    <metal:macro use-macro="context/@@nui_batch_macros/sort_widget" />
	  </div>
	  
          <!-- the results are displayed here -->
          <ol class="oc-roster oc-clearAfter">
            <li class="oc-clearAfter oc-boxy vcard"
		tal:repeat="membership batch">
	      <tal:result replace="structure python:view.result_listing(membership)" />
	    </li>
          </ol>
	  
          <div class="oc-directory-sorter" tal:define="many python: batch.start!=batch.end">
            <metal:macro use-macro="context/@@nui_batch_macros/pagination"/>              
            <metal:macro use-macro="context/@@nui_batch_macros/sort_string"/>	      
	  </div>
	  
        </tal:got_results>
	
        <!-- if we get no results, this is what is displayed -->
        <div tal:condition="not:batch">No team members found.</div>
	
      </div> <!-- content-main -->
      
      
      <div id="oc-content-sidebar">
      </div><!-- content-sidebar -->
      
    </div><!-- content-fill-slot -->
  </body>
</html>
