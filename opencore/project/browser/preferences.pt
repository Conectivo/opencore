<tal:vars 
   define="proj view/project_info">
<html metal:use-macro="here/@@standard_macros/master">
  <head>
    <title metal:fill-slot="title"
           tal:content="string:Preferences - ${view/window_title}" />
  </head>
  <body>
    <div metal:fill-slot="content">
      <div class="oc-headingBlock">
        <h1><span tal:replace="view/project_noun/title">Project</span> preferences</h1>
      </div>
      <div id="oc-content-main" class="oc-content-main-fullWidth">
        <form 
           name="prefs_form" 
           method="post" 
           class="enableUnloadProtection"
           tal:attributes="action view/name" 
           enctype="multipart/form-data">
          <input type="hidden" name="set_flets" value="1"/>
          <fieldset class="oc-boxy">
            <legend class="oc-legend-heading oc-biggerText">Basics</legend>
            <table class="oc-form">
              <tbody>
                <tr class="oc-form-row">
                  <th class="oc-form-label" scope="row">
                    <label for="project_title">Name</label>
                  </th>
                  <td class="oc-form-value">
                    <input type="text" id="project_title" name="project_title"
                           tal:attributes="value python:request.get('project_title') or view.project_info['title'] "/>
                  </td>
                  <td class="oc-form-help">
                    <span class="oc-form-context"></span>
                    <span id="oc-project_title-validator" class="oc-form-validator"></span>
                    <span id="oc-error" class="oc-form-error" tal:content="view/errors/project_title | nothing" />
                  </td>
                </tr>
                <tr class="oc-form-row">
                  <th class="oc-form-label" scope="row">
                    <label>URL</label>
                  </th>
                  <td class="oc-form-value">
                    <span tal:content="proj/url"/>
                  </td>
                  <td class="oc-form-help">
                    <span class="oc-form-context"></span>
                  </td>
                </tr>
                <tr class="oc-form-row">
                  <th class="oc-form-label" scope="row">
                    <label for="description">Description</label>
                  </th>
                  <td class="oc-form-value">
                    <textarea name="description" id="description" tal:content="request/description | proj/description" rows="3" cols="40" />
                  </td>
                  <td class="oc-form-help">
                    <span class="oc-form-context"></span>
                    <span id="oc-description-validator" class="oc-form-validator"></span>
                  </td>
                </tr>
              </tbody>
            </table>
          </fieldset>
          <tal:stuff
               replace="structure provider:opencore.editform">
               project prefs viewlet stuff goes here!
	  </tal:stuff>
          <fieldset class="oc-boxy">
            <legend class="oc-legend-heading oc-biggerText">Security</legend>
            <fieldset>
              <ul class="oc-form-radiolist oc-form-fieldBlock">
                <li>
                  <input type="radio" class="oc-input-typeRadio" id="workflow_policy_open" name="workflow_policy"
                         value="open_policy" tal:attributes="checked python:proj['security']=='open_policy' and 'checked' or ''"/>
                  <label for="workflow_policy_open"
                         tal:content="string:Anyone can view this ${view/project_noun} and any ${view/portal_title} member can contribute to it" />
                </li>
                <li>
                  <input type="radio" class="oc-input-typeRadio" id="workflow_policy_medium" name="workflow_policy"
                         value="medium_policy" tal:attributes="checked python:proj['security']=='medium_policy' and 'checked' or ''"/>
                  <label for="workflow_policy_medium">Anyone can view this <span tal:replace="view/project_noun">project</span> but only team members can contribute to it</label>
                </li>
                <li>
                  <input type="radio" class="oc-input-typeRadio" id="workflow_policy_closed" name="workflow_policy"
                         value="closed_policy" tal:attributes="checked python:proj['security']=='closed_policy' and 'checked' or ''"/>
                  <label for="workflow_policy_closed">Only team members can view, contribute, or search for this <span tal:replace="view/project_noun">project</span></label>
                </li>
              </ul>
            </fieldset>
          </fieldset>

          <fieldset class="oc-boxy">
            <legend class="oc-legend-heading oc-biggerText">Tools</legend>
<!--
            <fieldset>
              <legend><strong>Which additional tools would you like to install?</strong></legend>
              <ul class="oc-form-radiolist oc-form-fieldBlock"
                  tal:define="featurelets provider:opencore.featurelets">
                <li class="oc-js-featurelet-undelete-warner"
                    tal:define="flet featurelets">
		    <span tal:replace="structure flet" />
                  <input type="checkbox"
                         class="oc-input-typeCheck oc-js-toggler"
                         name="featurelets:list"
                         tal:attributes="id string:oc-js-toggler-${flet/id};
                                         checked flet/enabled;
                                         value flet/id"
                         />
                  <label tal:attributes="for string:oc-js-toggler-${flet/id}"
                         tal:content="flet/title"
                         />
                  <span class="oc-warning"
                        style="display: none">
                        Warning: Removing this feature may result in data loss.
                  </span>
                </li>
              </ul>
            </fieldset>
-->
            
                <!-- Delete Project -->
          <fieldset class="oc-boxy">
            <legend class="oc-legend-heading oc-biggerText">Delete <span tal:replace="view/project_noun/title">Project</span></legend>
            <a tal:attributes="href string:${context/absolute_url}/delete">
              Remove this <span tal:replace="view/project_noun">project</span> from <span tal:replace="view/portal_title" />?
            </a>
          </fieldset>    
          <ul class="oc-actions">
            <li>
              <button type="submit" 
                      name="update:boolean" 
                      value="True" 
                      class="oc-button oc-chooseThis">
                Update
              </button>
            </li>
            <li>or <a href="">Cancel</a></li>
          </ul>
        </form>
      </div><!-- end .oc-content-main -->
    </div><!-- end content-fill-slot -->
  </body>
</html>
</tal:vars>
