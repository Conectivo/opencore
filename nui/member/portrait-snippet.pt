<tal:macro metal:define-macro="portrait">
<div class="oc-avatar" id="oc-profile-avatar">
  <img tal:attributes="src view/mangled_portrait_url" />
    <fieldset class="oc-expander" style="clear: left;">
      <legend class="oc-legend-label">
        <a href="#" class="oc-expander-link">Change image</a>
      </legend>
      <div class="oc-expander-content">
        <input type="file" name="portrait" size="14" /><br />
        <button type="submit" name="task" class="oc-js-actionButton"
          value="oc-profile-avatar_uploadAndUpdate">Update</button>
        <tal:hasportrait condition="python:
          view.viewed_member_info.get('portrait_url') !=
          view.defaultPortraitURL">or
          <button type="submit" name="task" class="oc-js-actionButton" 
            value="oc-profile-avatar_remove">Remove</button>
        </tal:hasportrait>
      </div>
  </fieldset>
</div>
</tal:macro>
