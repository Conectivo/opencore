<tal:vars define="usr view/vieweduser;
                  info view/info">

<html metal:use-macro="here/@@standard_macros/master">
  <body>
    <div metal:fill-slot="content">
      <div id="oc-content-main">
        <div id="oc-member-badge" class="oc-boxy oc-clearAfter vcard">
          <div class="oc-avatar">
            <img class="photo" tal:attributes="src info/portraitURL" />
          </div>
          <div class="oc-member-details">
            <div class="oc-headingBlock">
              <h1 class="fn" tal:content="usr/getId" />
              <p class="oc-member-fullname n" tal:content="usr/getFullname" />
              <p class="oc-headingContext oc-discreetText">
                member since <span tal:replace="info/membersince" />,
                last online <span tal:replace="info/lastonline" />
              </p>
            </div>
            <dl class="oc-member-info">
              <tal:location>
                <dt>Location</dt>
                <dd class="adr" tal:condition="usr/getLocation" tal:content="usr/getLocation" />
                <dd class="adr" tal:condition="not:usr/getLocation">not specified</dd>
              </tal:location>
              <dt>Projects</dt>
              <dd>
                <tal:projects condition="usr/projectBrains">
                  <ul class="oc-inlineList">
                    <li tal:repeat="proj usr/projectBrains"><a
                        tal:attributes="href proj/getURL"
                        tal:content="proj/Title" /><tal:private
                        condition="python: proj.review_state == 'closed'">
                        (private)</tal:private></li>
                  </ul>
                </tal:projects>
                <tal:noprojects condition="not: usr/projectBrains">
                  none
                </tal:noprojects>
              </dd>
            </dl>
          </div>
        </div>
        <dl class="oc-member-info">
          <dt>Personal Statement</dt>
          <dd tal:condition="usr/getStatement" tal:content="usr/statement" />
          <dd tal:condition="not:usr/getStatement">not specified</dd>
          <dt>Skills</dt>
          <dd tal:condition="usr/getSkills" tal:content="usr/getSkills" />
          <dd tal:condition="not:usr/getSkills">not specified</dd>
          <dt>Affiliations</dt>
          <dd tal:condition="usr/getAffiliations" tal:content="usr/getAffiliations" />
          <dd tal:condition="not:usr/getAffiliations">not specified</dd>
          <dt>Background</dt>
          <dd tal:condition="usr/getBackground" tal:content="usr/getBackground" />
          <dd tal:condition="not:usr/getBackground">not specified</dd>
          <dt>Favorites</dt>
          <dd tal:condition="usr/getFavorites" tal:content="usr/getFavorites" />
          <dd tal:condition="not:usr/getFavorites">not specified</dd>
        </dl>
      </div><!-- end #oc-content-main -->

      <div id="oc-content-sidebar">
        <div class="oc-headingBlock">
          <h2>Recent activity</h2>
        </div>
        <div class="oc-widget oc-widget-lastModified">
          <div class="oc-headingBlock">
            <h3>Pages last modified</h3>
          </div><!-- end .oc-headingBlock -->
          <table class="oc-table" cellpadding="0" cellspacing="0">
            <thead>
              <tr>
                <th scope="col">Date</th>
                <th scope="col">Page</th>
              </tr>
            </thead>
            <tbody>
              <tr tal:repeat="item view/activity">
                <td tal:content="item/date" />
                <td><a tal:attributes="href item/url" tal:content="item/title" /></td>
              </tr>
            </tbody>
          </table>
        </div><!-- end .oc-widget-lastModified -->
      </div><!-- end .oc-content-sidebar -->
    </div><!-- content-fill-slot -->
  </body>
</html>
</tal:vars>
