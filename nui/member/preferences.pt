<tal:vars define="data view/viewed_member_info">

<html metal:use-macro="here/@@standard_macros/master">
  <body>

    <div metal:fill-slot="content">

<div class="oc-headingBlock">
  <h1>Your account</h1>
  <p class="oc-headingContext">View and manage your project memberships and account settings</p>
</div>
  
<div id="oc-content-main">
  
  <div class="oc-widget oc-widget-invite">
    <div class="oc-headingBlock">
      <h2>Latest updates (x)</h2>
    </div>
    <!-- new stuff -->
    <ul class="oc-invite-list">
      <li class="oc-invite oc-boxy oc-clearAfter"
          tal:repeat="proj_id view/invitations">
        <div class="oc-avatar">
          <!-- XXX is this the project avatar? proj admin avatar? -->
          <img src="" />
        </div>
        <p class="oc-invite-content"
           tal:define="proj python:view.project_for(proj_id)">
          <a href="" tal:attributes="href string:${view/portal_url}/projects/${invitation}" tal:content="proj/description">Animal Campaign</a> 
      has invited you to become a member
        </p>
        <ul class="oc-actions oc-invite-actions oc-actionClose">
          <li><a href="" class="oc-actionLink oc-chooseAccept">Accept</a></li>
          <li><a href="" class="oc-actionLink oc-chooseReject">Deny</a></li>
          <li><a href="" class="oc-actionLink oc-chooseIgnore">Ignore</a></li>
        </ul>
      </li>
    </ul>
    new stuff above
    <!-- new stuff -->
    <ul class="oc-invite-list">
      <li class="oc-invite oc-boxy oc-clearAfter">
          <div class="oc-avatar">
            <img src="" />
          </div>
          <p class="oc-invite-content">
            You have been accepted to <a href="">Turkey Time</a> 
          </p>
          <a href="#" title="Close" class="oc-actionClose  oc-actionLink">Close</a>
        </li>
      <li class="oc-invite oc-boxy oc-clearAfter">
          <div class="oc-avatar">
            <img src="" />
          </div>
          <p class="oc-invite-content">
            You have been denied membership to <a href="">Chicken Adidas</a> 
          </p>
          <a href="#" title="Close" class="oc-actionClose  oc-actionLink">Close</a>
        </li>
      <li class="oc-invite oc-boxy oc-clearAfter">
        <div class="oc-avatar">
          <img src="" />
        </div>
        <p class="oc-invite-content">
          <a href="">Animal Campaign</a> 
      has invited you to become a member
        </p>
        <ul class="oc-actions oc-invite-actions oc-actionClose">
          <li><a href="" class="oc-actionLink oc-chooseAccept">Accept</a></li>
          <li><a href="" class="oc-actionLink oc-chooseReject">Deny</a></li>
          <li><a href="" class="oc-actionLink oc-chooseIgnore">Ignore</a></li>
        </ul>
      </li>
      <li class="oc-invite oc-boxy oc-clearAfter">
        <div class="oc-avatar">
          <img src="http://www.3dvalley.com/tutorials/modeling_basketball_clip_image037.gif" />
        </div>
        <p class="oc-invite-content">
          <a href="">Animal Campaign for a really important animal named Charlie</a> 
      has invited you to become a member
        </p>
        <ul class="oc-actions oc-invite-actions oc-actionClose">
          <li><a href="" class="oc-actionLink oc-chooseAccept">Accept</a></li>
          <li><a href="" class="oc-actionLink oc-chooseReject">Deny</a></li>
          <li><a href="" class="oc-actionLink oc-chooseIgnore">Ignore</a></li>
        </ul>
      </li>
    </ul>
  </div><!-- end .widget-invitations -->
  

  <div class="oc-widget oc-widget-dataTable oc-clearAfter"
       tal:define="projinfos view/get_projects_for_user"
       tal:condition="projinfos"
       >
    <div class="oc-headingBlock">
      <h2 class="oc-toggleFold">
        Projects you belong to (<span tal:replace="python: len(projinfos)" />)
      </h2>
    </div><!-- end .headingBlock -->
  
    <form class="oc-liveForm" action="preferences">
    <table id="" class="oc-dataTable" cellpadding="0" cellspacing="0">
      <thead>
        <tr>
          <th class="" style="width: 10px;" scope="col"><input class="oc-checkAll" type="checkbox" /></th>
          <th class="oc-columnSortable" style="width: 200px;" scope="col">Project </th>
          <th class="oc-columnSortable" scope="col">Since</th>
          <th class="oc-columnSortable" scope="col">Listed</th>
          <th class="oc-columnAction" scope="col">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tal:for repeat="projinfo projinfos">
          <tal:var define="proj_id projinfo/proj_id">
          <tr class="oc-liveItem" tal:attributes="id proj_id">
            <td><input type="checkbox" name="check:list" tal:attributes="value proj_id" /></td>
            <td class="oc-dataTable-row-title">
              <a href=""
                 tal:attributes="href string:${view/portal_url}/projects/${proj_id}"
                 tal:content="projinfo/title">
                 Animal Campaign for a poor little sick kittie named Fatty
              </a>
            </td>
            <td id="oc-liveEdit_8" class="oc-liveItem">
              <span tal:replace="projinfo/since" />
            </td>
            <td id="" class="oc-liveItem">
            <!--span id=""
                  class="oc-liveItem-value oc-liveItem-directEdit oc-liveItem-directSelect"
                  tal:content="python: projinfo['listed'] and 'yes' or 'no'" /-->
              <!--span tal:define="listed python: projinfo['listed'] and 'yes' or 'no'"
                    tal:replace="listed" /-->
              <select tal:define="listed python: projinfo['listed']"
                      tal:attributes="name proj_id"
                      class="oc-actionSelect"
                      >

                  <option value="public"
                          tal:attributes="selected listed">yes</option>
                  <option value="private"
                          tal:attributes="selected not: listed">no</option>

              </select>
            </td>
            <td>
              <ul class="oc-actions oc-dataTable-row-actions">
                <li><a class="oc-actionLink" tal:attributes="href string:${context/absolute_url}/${view/name}?task=${proj_id}_leave">Leave</a></li>
              </ul>
            </td>
        </tr>
        </tal:var>
        </tal:for>
        <!-- keep in a sample member with static data -->
        <!--tr>
          <td><input type="checkbox" /></td>
          <td class="oc-dataTable-row-title"><a href="">Animal Campaign for a poor little sick kittie named Fatty</a></td>
            <td id="oc-liveEdit_8" class="oc-liveItem">
      <span id="oc-liveEdit_8_value" class="oc-liveItem-value oc-liveItem-directEdit oc-liveItem-directSelect">not set</span>
      <div id="oc-liveEdit_8_form" class="oc-liveItem-editForm">
        <select>
          <option>-- not set --</option>
          <option>Active</option>
          <option>Banned</option>
        </select>
        <a href="#" class="oc-liveItem_cancel">Cancel</a>
      </div>
          </td>
      <td>5:30am</td>
          <td id="" class="oc-liveItem">
      <span id="" class="oc-liveItem-value oc-liveItem-directEdit oc-liveItem-directSelect">not set</span>
      <div id="" class="oc-liveItem-editForm">
        <select>
          <option>-- not set --</option>
          <option>Member</option>
          <option>Administrator</option>
          <option>Administrator2</option>
          <option>Administrator3</option>
        </select>
        <a href="#" class="oc-liveItem_cancel">Cancel</a>
      </div>
          </td>
          <td>
            <ul class="oc-actions oc-dataTable-row-actions">
              <li><a href="#">Leave</a></li>
            </ul>
          </td>
        </tr-->
      </tbody>
    </table>
    <ul class="oc-actions oc-dataTable-actions">
      <li>
        <button type="submit" name="task" value="batch:check_leave" class="oc-button oc-chooseThis">Leave projects</button>
      </li>
      <li><input type="submit" value="Do something else" class="oc-button" /></li>
    </ul>
    <ul class="oc-paginator oc-dataTable-paginator">
    <!--<li>&larr; Prev</li>-->
    <li>Page 1</li>
    <li><a href="">2</a></li>
    <li><a href="">3</a></li>
    <li><a href="">Next &rarr;</a></li>
  </ul>
  </form>
  </div><!-- end .widget-table -->

</div><!-- end #oc-content-main -->

<div id="oc-content-sidebar">
  <div class="oc-getstarted">
    <h2>Next steps&hellip;</h2>
    <ol class="oc-getstarted-list">
        <li>
          <h3><a href="profile-edit">1. Personalize your profile</a></h3>
          <p class="oc-discreetText">Tell everyone a little about yourself.</p>
        </li> 
        <li>
          <h3><a href="#">2. Post a photo of yourself</a></h3>
          <p class="oc-discreetText">Tell everyone a little about yourself.</p>
        </li>
        <li>
          <h3><a href="#">3. Customize your homepage</a></h3>
          <p class="oc-discreetText">Tell everyone a little about yourself.</p>
        </li>
        <li>
          <h3><a tal:attributes="href string:${context/portal_url}/projects">4. Join or start a project</a></h3>
          <p class="oc-discreetText">Tell everyone a little about yourself.</p>
        </li>
    </ol>
  </div>
  <div class="oc-boxy">
    <h2>Account settings</h2>
    <a href="profile-edit">Edit profile</a>
    <form class="oc-expander">
      <fieldset>
        <legend class="oc-legend-label">
          <a href="#" class="oc-expander-link">Change email</a>
        </legend>
        <ul class="oc-expander-content oc-plainList">
          <li>
            <label for="email">Email</label><br />
            <input type="text" id="email" tal:attributes="value data/email"/>
          </li>
          <li class="oc-form-fieldBlock oc-smallText">
            <input type="checkbox" class="oc-input-typeCheck" id="email_hide" />
            <label for="email_hide">Hide email address by default?</label>
          </li>
          <li>
            <button type="submit" 
              name="update:boolean" 
              value="True" 
              class="oc-button oc-chooseThis">
              Change
            </button>
          </li>
        </ul>
      </fieldset>
    </form>
    <form class="oc-expander">
      <fieldset>
        <legend class="oc-legend-label">
          <a href="#" class="oc-expander-link">Change password</a>
        </legend>
        <ul class="oc-expander-content oc-plainList">
          <li>
            <label for="passwd_curr">Current password</label><br />
            <input type="password" id="passwd_curr" />
          </li>
          <li>
            <label for="passwd_new">New password</label><br />
            <input type="password" id="passwd_new" />
          </li>
          <li>
            <label for="passwd_new_confirm">Confirm new password</label><br />
            <input type="password" id="passwd_new_confirm" />
          </li>
          <li>
            <button type="submit" 
              name="update:boolean" 
              value="True" 
              class="oc-button oc-chooseThis">
              Change
            </button>
          </li>
        </ul>
      </fieldset>
    </form>
  </div>
  
</div><!-- end #oc-content-sidebar -->


  </div><!-- content-fill-slot -->
</body>
</html>
</tal:vars>
