<tal:vars define="global proj view/project_info;
                  global team_manage_macros view/team_manage_macros/macros" />

<tal:handle-request condition="request/handle_request | nothing">
  <tal:callit define="bogus view/handle_request" />
</tal:handle-request>

<html metal:use-macro="here/@@standard_macros/master">
  <body>
    <div metal:fill-slot="content">
    
    <div class="oc-headingBlock">
      <h1>Team Management</h1>
      <p class="oc-headingContext"
         tal:define="nmembers python:len(view.active_mships);
                     npending python:len(view.pending_mships)"
         tal:content="string:$nmembers members, $npending pending memberships" />
    </div>
    
    <div id="oc-content-main">

      <div id="oc-congrats" class="oc-boxy">
        <h2>Congratulations on your new project!</h2>
        <p>
          You should now create a team for your project by adding existing
          OpenPlans.org members.
        </p>
        <p>
          You will always be able to add new members and manage your team
          later on this same page.
        </p>
      </div><!-- end #oc-congrats -->
        

      <div id="oc-search-members">
        <h2>Search for members</h2>
        <p>
          Search the OpenPlans directory to find users you know and
          invite them to join your project.
        </p>
        <form name="search-members" id="search-members" method="POST"
              tal:attributes="action view/request/ACTUAL_URL">
          <input type="hidden" name="handle_request:boolean"
                 value="True" />
          <input class="oc-input-typeText" type="text" name="search_for" />
          <button type="submit" name="search-members" value="search-members"
                  class="oc-button">search</button>
          <div tal:condition="view/results | nothing">
            <div tal:repeat="member view/results">
              <button type="submit" name="invite-member" class="oc-button"
                      tal:attributes="value member/getId">invite</button>
              <tal:mem_url define="mem_url python:view.membertool.getHomeUrl(member.getId)">
                <a tal:condition="mem_url" tal:attributes="href mem_url"
                   tal:content="string: ${member/getId}: ${member/getFullname}" />
                <span tal:condition="not:mem_url"
                      tal:replace="string: ${member/getId}: ${member/getFullname}" />
              </tal:mem_url>
            </div>
          </div>
        </form>
      </div><!-- end #oc-search-members -->

    </div><!-- end #oc-content-main -->
    
    <div class="oc-content-sidebar">
      <div class="oc-headingBlock">
        <h2>What's a team?</h2>
      </div>

      <h3>About Teams</h3>
      <p>
        An OpenPlans team is a group of registered members that are
        active participants in your project.
      </p>
      <p>
        If your project is open, anyone else can edit your content, but
        they will not show up on the list of project team members, and
        the project will not show up on the members' project lists.
      </p>

      <h3>About Roles</h3>
      <dl>
        <dt>Member</dt>
        <dd>Definition of member</dd>
        
        <dt>Administrator</dt>
        <dd>Definition of admin</dd>
      </dl>

    </div><!-- end #oc-content-sidebar -->
    
    </div><!-- end content-fill-slot -->
  </body>
</html>
